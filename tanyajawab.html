<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tanya Jawab OSIS</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; font-family: 'Poppins', sans-serif; margin:0; padding:0; }
body { background: linear-gradient(180deg,#e0e7ff,#f8fafc); padding:16px; }

/* TOPBAR */
.topbar { display:flex; justify-content:space-between; align-items:center; background:white; padding:14px 16px; border-radius:18px; box-shadow:0 10px 25px rgba(0,0,0,0.08); margin-bottom:14px; }
.left { display:flex; align-items:center; gap:14px; }
.burger { width:44px; height:44px; border-radius:14px; border:none; background:#1e3a8a; color:white; font-size:22px; cursor:pointer; }
.title { font-weight:600; font-size:18px; white-space:nowrap; }
.logos { display:flex; align-items:center; gap:10px; }
.logos img { width:40px; height:40px; object-fit:contain; background:white; padding:4px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }

/* MENU */
.menu { display:none; background:#1e3a8a; border-radius:16px; padding:10px; margin-bottom:20px; }
.menu a { display:block; color:white; text-decoration:none; padding:10px 12px; border-radius:10px; font-size:14px; }
.menu a:hover { background: rgba(255,255,255,0.2); }

/* FORM */
.container { max-width:900px; margin:auto; }
h2 { text-align:center; margin-bottom:20px; color:#1e3a8a; }
.qa-form, #passwordForm { background:white; padding:20px; border-radius:20px; box-shadow:0 10px 25px rgba(0,0,0,0.08); margin-bottom:24px; }
.qa-form textarea, #passwordInput { width:100%; padding:12px; border-radius:12px; border:1px solid #cbd5e1; font-size:14px; resize:none; height:100px; text-align:left; line-height:1.4; }
.qa-form textarea::placeholder { text-align:center; color:#555; }
.qa-form button, #passwordForm button { margin-top:12px; padding:12px 20px; border:none; border-radius:12px; background:#1e3a8a; color:white; font-size:16px; cursor:pointer; transition:0.25s; }
.qa-form button:hover, #passwordForm button:hover { background:#3749b0; }

/* LIST PERTANYAAN */
.qa-list { margin-top:20px; }
.qa-card { background:white; padding:16px; border-radius:16px; box-shadow:0 10px 25px rgba(0,0,0,0.08); margin-bottom:12px; }
.qa-card span { font-size:13px; color:#555; display:block; margin-top:6px; }
.qa-card small { font-size:11px; color:#888; display:block; margin-top:2px; }
.qa-card textarea { width:100%; padding:8px; margin-top:6px; border-radius:10px; border:1px solid #cbd5e1; resize:none; height:60px; font-size:13px; }
.qa-card button { margin-top:6px; padding:8px 14px; border:none; border-radius:10px; background:#1e3a8a; color:white; font-size:14px; cursor:pointer; transition:0.25s; }
.qa-card button:hover { background:#3749b0; }

/* TOAST MODERN */
#toast {
  visibility:hidden;
  min-width:250px;
  background-color:#1e3a8a;
  color:white;
  text-align:center;
  border-radius:12px;
  padding:16px;
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  z-index:999;
  font-size:14px;
  box-shadow:0 8px 20px rgba(0,0,0,0.2);
  transition:0.5s;
  line-height:1.4;
}
</style>
</head>
<body>

<div class="topbar">
  <div class="left">
    <button class="burger" onclick="toggleMenu()">☰</button>
    <div class="title">Bendahara OSIS</div>
  </div>
  <div class="logos">
    <img src="logo-sekolah.png" alt="Logo Sekolah">
    <img src="logo-osis.png" alt="Logo OSIS">
  </div>
</div>

<div id="menu" class="menu">
  <a href="index.html">Beranda</a>
  <a href="laporan.html">Laporan Keuangan</a>
  <a href="tanyajawab.html">Tanya Jawab</a>
</div>

<div class="container">
  <h2>Tanya Jawab OSIS</h2>

  <!-- FORM PASSWORD BENDARAHA -->
  <div id="passwordForm">
    <input type="password" id="passwordInput" placeholder="Masukkan password bendahara">
    <button onclick="checkPassword()">Login sebagai bendahara</button>
  </div>

  <!-- FORM PERTANYAAN -->
  <div class="qa-form">
    <textarea id="question" placeholder="Tulis pertanyaan seputar keuangan OSIS..." required></textarea>
    <button onclick="sendQuestion()">Kirim Pertanyaan</button>
  </div>

  <div class="qa-list" id="qaList"></div>
</div>

<div id="toast">Terimakasih atas feedback-nya! ✅</div>

<script>
const BENDARAHA_PASSWORD = "bendaharaosis123"; 
let isBendahara = false;
let questionCount = 0;
let questionsData = []; // simpan semua pertanyaan

// BURGER MENU
function toggleMenu(){
  const menu = document.getElementById("menu");
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

// CEK PASSWORD
function checkPassword(){
  const input = document.getElementById("passwordInput").value;
  if(input === BENDARAHA_PASSWORD){
    isBendahara = true;
    document.getElementById("passwordForm").style.display = "none";
    showToast("Login bendahara berhasil! ✅");
    renderQuestions(); // render ulang semua pertanyaan dengan kolom jawaban
  } else {
    showToast("Password salah!");
  }
}

// KIRIM PERTANYAAN
function sendQuestion(){
  const questionText = document.getElementById("question").value.trim();
  if(!questionText){
    showToast("Tulis pertanyaan terlebih dahulu!");
    return;
  }
  questionCount++;
  const now = new Date();
  const dateTimeString = now.toLocaleString('id-ID', { dateStyle: 'short', timeStyle: 'short' });
  questionsData.unshift({
    id: questionCount,
    text: questionText,
    answer: "",
    questionTime: dateTimeString,
    answerTime: ""
  });
  renderQuestions();
  document.getElementById("question").value="";
  showToast("Terimakasih atas feedback-nya! ✅");
}

// RENDER SEMUA PERTANYAAN
function renderQuestions(){
  const qaList = document.getElementById("qaList");
  qaList.innerHTML = "";
  questionsData.forEach(q => {
    const card = document.createElement("div");
    card.className = "qa-card";
    card.id = `qaCard${q.id}`;
    card.innerHTML = `
      <strong>Pertanyaan:</strong><span>${q.text}</span>
      <small>Diajukan: ${q.questionTime}</small>
      ${isBendahara ? `<textarea id="answer${q.id}" placeholder="Tulis jawaban...">${q.answer}</textarea>
      <button onclick="submitAnswer(${q.id})">Jawab</button>` : ''}
      <div class="answer-display" id="answerDisplay${q.id}">
        ${q.answer ? `<strong>Jawaban:</strong><span>${q.answer}</span><br><small>Terjawab: ${q.answerTime}</small>` : ''}
      </div>
    `;
    qaList.appendChild(card);
  });
}

// SUBMIT JAWABAN
function submitAnswer(id){
  const answerText = document.getElementById(`answer${id}`).value.trim();
  if(!answerText){ showToast("Tulis jawaban dulu!"); return; }
  const qIndex = questionsData.findIndex(q => q.id === id);
  if(qIndex !== -1){
    questionsData[qIndex].answer = answerText;
    questionsData[qIndex].answerTime = new Date().toLocaleString('id-ID', { dateStyle: 'short', timeStyle: 'short' });
  }
  renderQuestions();
  showToast("Jawaban berhasil dikirim! ✅");
}

// TOAST
function showToast(message){
  const toast = document.getElementById("toast");
  toast.textContent = message;
  toast.style.visibility = "visible";
  toast.style.opacity = 1;
  setTimeout(()=>{
    toast.style.opacity = 0;
    setTimeout(()=> toast.style.visibility = "hidden",500);
  }, 2500);
}
</script>

</body>
</html>